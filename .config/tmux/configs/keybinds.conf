# Prefix
set-option -g prefix C-b
set-option -g prefix2 none

# Utility bindings
unbind r
bind r source-file ~/.config/tmux/tmux.conf; display "tmux: config reloaded!"

unbind %
bind | split-window -h -c "#{pane_current_path}"

unbind '"'
bind - split-window -v -c "#{pane_current_path}"

unbind v
bind v copy-mode

# Resizing panes with hjkl
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5
bind -r m resize-pane -Z

# Copy mode bindings
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection
unbind -T copy-mode-vi MouseDragEnd1Pane

# Application & Popup bindings
bind-key -r f run-shell "tmux neww ~/scripts/tmux-sessionizer"
bind-key n command-prompt "new-session -s '%%'"
bind-key C-y display-popup -d "#{pane_current_path}" -w 90% -h 90% -E "yazi"
bind-key C-t display-popup -d "#{pane_current_path}" -w 80% -h 80% -E "zsh"
bind-key C-g display-popup -d "#{pane-current-path}" -w 90% -h 90% -E "lazygit"
bind-key C-m display-popup -w 95% -h 95% -E "rmpc"
bind d detach

# Config Menu
bind _ display-menu -T "#[align=centre]Config" -x C -y C \
    ".zshrc"            z  "display-popup -w 75% -h 75% -E 'nvim ~/.zshrc'" \
    ".zprofile"         p  "display-popup -w 75% -h 75% -E 'nvim ~/.zprofile'" \
    ".tmux.conf"        t  "display-popup -w 75% -h 75% -E 'nvim ~/.config/tmux/tmux.conf'" \
    ".nvim"             v  "display-popup -d ~/dotfiles/nvim/.config/nvim -E 'nvim ~/dotfiles/nvim/.config/nvim'" \
    "quit"              q  ""
